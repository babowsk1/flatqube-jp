---
description: 提供された流動性に対して、LPトークンがどのようにミントされるかを見てみましょう
---

# LPトークン量の計算

## 初期供給

新しい流動性プールを作成し、そこに流動性を預けると、その後に供給されるLPトークンの基準として使用されるLPトークンの初期量が得られます。最初のミント手順をよりよく理解するために、例を見てみましょう。

1,000,000APPLEと200CUCUMBERトークンのプールを作成すると仮定して、以下の精度(カンマの後の桁数)を有するとします。

* APPLE - 6桁 (0.000 000)
* CUCUMBER - 12桁 (0.000 000 000 000)

Everscaleのスマートコントラクトは整数で動作するため、トークンの数量は整数部分と、その精度までの端数を合わせた1つの大きな数字として認識されます。つまり、スマートコントラクトでは1APPLEは1,000,000として保存され、1CUCUMBERトークンは1,000,000,000となります。

つまりこの例では、1,000,000 APPLEトークンは、スマートコントラクトのメモリー内で1,000,000,000,000となり、200 CUCUMBERは200,000,000,000となります。

次に、コントラクトはそのうちの最も大きな数(例:200,000,000,000,000)を取り、その数をLPトークンの精度(9桁)で割ってLPトークンを発行します。つまり、プール作成終了時に、200,000 FLATQUBE-LP-APPLE-CUCUMBERトークンを取得できるのです。

## 後続の供給

その後の供給は、(a)プール内の現在の流動性レベルと(b)LPトークンの総供給量を比較して、新たに提供された流動性割合で動作します。

例えば、200,000 APPLEと40 CUCUMBERトークンを追加するとしましょう。

このような場合、コントラクトはこの式に従ってミントするLPトークンの量を計算します：

$$
LP_{issue}=LP_{current} × max(\frac{SupplyLeft_{new}}{SupplyLeft_{old}},\frac{SupplyRight_{new}}{SupplyRight_{old}})
$$

そのため、私たちの場合は下記のようになります：

$$
LP_{issue}=200,000\times max\big(\frac{200,000,000,000}{1,000,000,000,000},\frac{40,000,000,000,000}{200,000,000,000,000}\big)=50,000
$$

この例では、LPトークンの総供給量になります：

$$
LP_{new}=LP_{old}+LP_{issue}=200,000+50,000=250,000
$$

{% hint style="warning" %}
なお、プール内にあるトークン間の残高は、スワップごとに変化します。そのため、同じ数のLPトークンを得るためには、異なる数のプールトークンを提供する必要があります。
{% endhint %}
